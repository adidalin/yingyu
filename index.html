<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å°å­¦è‹±è¯­å•è¯ & å¥å­é—ªå¡ (å¤§å­—ç‰ˆ)</title>
    <style>
        :root {
            /* èƒŒæ™¯è‰²ï¼šææ·¡çš„æŠ¤çœ¼è“ç´«è‰²è°ƒ */
            --bg-gradient: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            --card-bg: #ffffff;
            --text-main: #000000; /* çº¯é»‘ï¼Œæœ€é«˜æ¸…æ™°åº¦ */
            --text-sub: #555555;
            --accent-color: #4834d4; /* æ·±è“ç´«è‰²ï¼Œæ˜¾çœ¼ */
            --btn-start-bg: #2ecc71; /* ç»¿è‰²å¼€å§‹æŒ‰é’® */
            --btn-next-bg: #3498db; /* è“è‰²ä¸‹ä¸€æ­¥ */
        }

        body {
            margin: 0;
            padding: 0;
            /* å­—ä½“ï¼šä¼˜å…ˆä½¿ç”¨ç³»ç»Ÿé»‘ä½“ï¼ŒåŠ ç²—æ˜¾ç¤º */
            font-family: "Microsoft YaHei", "SimHei", "PingFang SC", "Heiti SC", sans-serif;
            background: var(--bg-gradient);
            height: 100vh;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        /* ---------------- å¼ºåˆ¶æ¨ªå±æç¤º (æ‰‹æœºç«¯) ---------------- */
        #orientation-lock {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 9999;
            color: white;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        
        .rotate-icon {
            font-size: 5rem;
            margin-bottom: 20px;
            animation: rotatePhone 2s infinite ease-in-out;
        }

        @keyframes rotatePhone {
            0% { transform: rotate(0deg); }
            50% { transform: rotate(-90deg); }
            100% { transform: rotate(0deg); }
        }

        @media screen and (orientation: portrait) and (max-width: 800px) {
            #orientation-lock { display: flex; }
            .container { display: none !important; }
        }

        /* ---------------- ä¸»å®¹å™¨ ---------------- */
        .container {
            background-color: var(--card-bg);
            width: 96%;
            height: 94%;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
            display: flex;
            flex-direction: column;
            padding: 15px;
            box-sizing: border-box;
            position: relative;
        }

        /* ---------------- 1. é€‰æ‹©ç•Œé¢ (é¦–é¡µ) ---------------- */
        #selection-screen {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        /* é¦–é¡µæ ‡é¢˜ */
        h1 {
            margin: 0 0 20px 0;
            color: var(--text-main);
            font-size: 2.5rem; /* æ”¾å¤§æ ‡é¢˜ */
            text-align: center;
            letter-spacing: 2px;
        }

        /* å•å…ƒæ ¼å¸ƒå±€ */
        .unit-grid {
            display: grid;
            /* è‡ªé€‚åº”åˆ—å®½ï¼Œç¨å¾®åŠ å®½ä»¥å®¹çº³å¤§å­— */
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            width: 100%;
            max-width: 1000px;
            overflow-y: auto;
            max-height: 65vh;
            padding: 10px;
        }

        .unit-label {
            background: #f1f2f6;
            border: 3px solid #dfe4ea;
            border-radius: 15px;
            padding: 15px; /* å¢åŠ å†…è¾¹è· */
            cursor: pointer;
            text-align: center;
            transition: all 0.2s;
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-height: 80px; /* ä¿è¯å¡ç‰‡é«˜åº¦ */
        }

        /* å•å…ƒåç§° (ç¬¬ä¸€è¡Œ) - æ”¾å¤§ */
        .unit-label strong {
            font-size: 1.4rem; 
            color: #2f3542;
            display: block;
            margin-bottom: 8px;
        }
        
        /* å•å…ƒæè¿° (ç¬¬äºŒè¡Œ) - æ”¾å¤§ */
        .unit-label span {
            font-size: 1.1rem;
            color: #57606f;
            font-weight: normal;
        }

        input[type="checkbox"] { display: none; }
        
        /* é€‰ä¸­çŠ¶æ€ */
        input[type="checkbox"]:checked + .unit-label {
            border-color: var(--accent-color);
            background-color: #e8eaf6; /* æ·¡è“ç´«è‰²èƒŒæ™¯ */
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        input[type="checkbox"]:checked + .unit-label strong {
            color: var(--accent-color);
        }

        /* å¼€å§‹æŒ‰é’® - æ”¾å¤§ */
        .start-btn {
            margin-top: 25px;
            background: var(--btn-start-bg);
            color: white;
            border: none;
            padding: 15px 100px; /* æŒ‰é’®æ›´å®½ */
            font-size: 1.8rem;   /* æŒ‰é’®æ–‡å­—æ›´å¤§ */
            border-radius: 60px;
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(46, 204, 113, 0.4);
            font-weight: bold;
            font-family: inherit;
            transition: transform 0.1s;
        }
        .start-btn:active { transform: scale(0.95); }

        /* ---------------- 2. ç»ƒä¹ ç•Œé¢ ---------------- */
        #game-screen {
            display: none;
            flex-direction: column;
            height: 100%;
        }

        /* é¡¶éƒ¨ä¿¡æ¯æ  */
        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 5px 10px;
            font-size: 1.2rem;
            color: #555;
            font-weight: bold;
        }
        
        /* èƒ¶å›Šæ ·å¼ */
        .badge {
            background: #dfe4ea;
            padding: 8px 20px;
            border-radius: 30px;
        }
        .badge-unit { color: var(--accent-color); background: #dcdde1; }

        /* æ–‡å­—å±•ç¤ºåŒº */
        .content-area {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            cursor: pointer;
            position: relative;
            padding: 0 20px;
            box-sizing: border-box;
        }

        #display-text {
            font-weight: 900; /* æœ€ç²—å­—ä½“ */
            color: black;
            text-align: center;
            line-height: 1.1;
            word-wrap: break-word;
            max-width: 100%;
        }

        /* åº•éƒ¨æŒ‰é’®æ  */
        .bottom-controls {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            padding-top: 10px;
            border-top: 2px solid #f1f2f6;
            height: 70px;
        }

        .btn {
            border: none;
            border-radius: 15px;
            font-size: 1.4rem;
            font-weight: bold;
            cursor: pointer;
            font-family: inherit;
            transition: opacity 0.2s;
        }

        .btn-back {
            background: #dcdde1;
            color: #2f3542;
            width: 120px;
        }

        .btn-next {
            background: var(--btn-next-bg);
            color: white;
            flex: 1;
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn:active { opacity: 0.8; }

        /* å¼¹å…¥åŠ¨ç”» */
        .pop-effect { animation: popIn 0.2s ease-out; }
        @keyframes popIn { 
            0% { transform: scale(0.85); opacity: 0.2; } 
            100% { transform: scale(1); opacity: 1; } 
        }

    </style>
</head>
<body>

    <!-- æ‰‹æœºç«–å±æç¤º -->
    <div id="orientation-lock">
        <div class="rotate-icon">ğŸ“±</div>
        <h2 style="font-size: 2rem;">è¯·æŠŠæ‰‹æœºæ¨ªè¿‡æ¥<br>è·å¾—æœ€å¤§å­—ä½“</h2>
    </div>

    <div class="container">
        
        <!-- 1. é€‰æ‹©ç•Œé¢ -->
        <div id="selection-screen">
            <h1>è‹±è¯­é—ªå¡ç»ƒä¹ </h1>
            <div class="unit-grid">
                <!-- Unit 1 -->
                <input type="checkbox" id="u1" class="unit-box" value="1" checked>
                <label for="u1" class="unit-label">
                    <strong>Unit 1 ç¬¬ä¸€å•å…ƒ</strong>
                    <span>é—®å€™ / å¥å­</span>
                </label>

                <!-- Unit 2 -->
                <input type="checkbox" id="u2" class="unit-box" value="2" checked>
                <label for="u2" class="unit-label">
                    <strong>Unit 2 ç¬¬äºŒå•å…ƒ</strong>
                    <span>æ•°å­— / å¥å­</span>
                </label>

                <!-- Unit 3 -->
                <input type="checkbox" id="u3" class="unit-box" value="3" checked>
                <label for="u3" class="unit-label">
                    <strong>Unit 3 ç¬¬ä¸‰å•å…ƒ</strong>
                    <span>å®¶åº­ / å¥å­</span>
                </label>

                <!-- Unit 4 -->
                <input type="checkbox" id="u4" class="unit-box" value="4" checked>
                <label for="u4" class="unit-label">
                    <strong>Unit 4 ç¬¬å››å•å…ƒ</strong>
                    <span>æ•™å®¤ / å¥å­</span>
                </label>

                <!-- Unit 5 -->
                <input type="checkbox" id="u5" class="unit-box" value="5" checked>
                <label for="u5" class="unit-label">
                    <strong>Unit 5 ç¬¬äº”å•å…ƒ</strong>
                    <span>ä¹¦åŒ… / å¥å­</span>
                </label>

                <!-- Unit 6 -->
                <input type="checkbox" id="u6" class="unit-box" value="6" checked>
                <label for="u6" class="unit-label">
                    <strong>Unit 6 ç¬¬å…­å•å…ƒ</strong>
                    <span>é¢œè‰² / å¥å­</span>
                </label>

                <!-- Unit 7 -->
                <input type="checkbox" id="u7" class="unit-box" value="7" checked>
                <label for="u7" class="unit-label">
                    <strong>æ•…äº‹ä¸æ‹“å±•</strong>
                    <span>é•¿å¥ / æ•…äº‹</span>
                </label>
            </div>
            <button class="start-btn" onclick="startGame()">å¼€å§‹ç»ƒä¹ </button>
        </div>

        <!-- 2. æ¸¸æˆç•Œé¢ -->
        <div id="game-screen">
            <div class="top-bar">
                <div class="badge" id="round-display">ç¬¬ 1 è½®</div>
                <div class="badge badge-unit" id="unit-display">Unit 1</div>
                <div class="badge" id="left-display">å‰©: 10</div>
            </div>

            <div class="content-area" onclick="nextContent()">
                <div id="display-text">Ready</div>
            </div>

            <div class="bottom-controls">
                <button class="btn btn-back" onclick="goBack()">é€€å‡º</button>
                <button class="btn btn-next" onclick="nextContent()">ä¸‹ä¸€ä¸ª (Next)</button>
            </div>
        </div>

    </div>

    <script>
        // æ•°æ®æºï¼šåŒ…å«å•è¯å’Œå¥å­
        const contentData = {
            1: [
                "hello", "nice", "meet", "you", "let's", "play", "I", "am", "I'm", "too", "Miss", "photo", "how", "say",
                "Nice to meet you.", "Let's play.", "I'm Miss Li.", "How do you say â€œhelloâ€."
            ],
            2: [
                "number", "one", "two", "three", "four", "five", "six", "seven", "balloon", "thank", "please", "Numbers",
                "Four balloons.", "Six balloons.", "Two balloons.", "One balloon.", "Thank you.", "Please say the number."
            ],
            3: [
                "family", "my", "mum", "dad", "grandpa", "grandma", "sister", "and", "brother", "this", "is", "love", "me", "tree",
                "Meet my family.", "My sister and brother.", "This is my grandma.", "I love my grandma.", "This is Toby's mum.", "I love my family.", "This is Toby's sister, May."
            ],
            4: [
                "classroom", "what", "open", "door", "blackboard", "window", "desk", "chair", "it", "big", "that", "teacher", "Good job!", "a(n)", "very", "old", "school", "look",
                "What's this?", "Open the door.", "This is my chair.", "This is the blackboard.", "That is my teacher.", "Good job, May!", "This is my classroom."
            ],
            5: [
                "schoolbag", "pencil case", "pencil", "book", "bye", "goodbye", "no", "here you are", "read", "together", "School things",
                "Open my schoolbag.", "Thatâ€™s Toby's book and pencil case.", "Let's read together.", "Here you are.", "Goodbye, dad!", "Look, this is my pencil case."
            ],
            6: [
                "colour", "red", "green", "blue", "black", "white", "yellow", "so", "many", "happy", "Chinese New Year", "stop", "go", "slow",
                "What colour?", "Black white and yellow.", "Red green and blue.", "So many colors.", "Blue green red and yellow, Four colors.", "Itâ€™s green red and yellow.", "Happy Chinese New Year", "It's red, stop!", "It's green, go!", "It's yellow, slow!"
            ],
            7: [
                "This is a very old school.", "That is an old school.", "Three books.", 
                "That is an apple tree.", "This apple is very big.", "This is my apple.", "One apple now.", 
                "The moon is in the water.", "Come and help.", "That is the moon.", "Itâ€™s still in the sky.", 
                "Six people in my family.", "Friendly Shandong welcomes you!", 
                "My brother is six, I love my brother.", "This is Mount Taishan."
            ]
        };

        let queue = [];
        let currentIndex = 0;
        let roundCount = 1;

        // é”®ç›˜æ§åˆ¶
        document.addEventListener('keydown', (e) => {
            if (document.getElementById('game-screen').style.display === 'flex') {
                if (['Space', 'Enter', 'ArrowRight'].includes(e.code)) {
                    e.preventDefault();
                    nextContent();
                }
            }
        });

        function startGame() {
            const boxes = document.querySelectorAll('.unit-box:checked');
            if (boxes.length === 0) { alert("è¯·è‡³å°‘é€‰æ‹©ä¸€ä¸ªå•å…ƒï¼"); return; }

            queue = [];
            boxes.forEach(box => {
                const u = parseInt(box.value);
                contentData[u].forEach(text => {
                    queue.push({ text: text, unit: u });
                });
            });

            shuffle(queue);
            currentIndex = 0;
            roundCount = 1;
            
            document.getElementById('selection-screen').style.display = 'none';
            document.getElementById('game-screen').style.display = 'flex';
            updateDisplay();
        }

        function goBack() {
            document.getElementById('game-screen').style.display = 'none';
            document.getElementById('selection-screen').style.display = 'flex';
        }

        function nextContent() {
            currentIndex++;
            if (currentIndex >= queue.length) {
                roundCount++;
                currentIndex = 0;
                shuffle(queue); 
            }
            updateDisplay();
        }

        function updateDisplay() {
            const item = queue[currentIndex];
            const textEl = document.getElementById('display-text');
            
            textEl.innerText = item.text;
            
            // æ›´æ–°é¡¶éƒ¨çŠ¶æ€
            const unitText = item.unit === 7 ? "æ•…äº‹/æ‹“å±•" : "Unit " + item.unit;
            document.getElementById('unit-display').innerText = unitText;
            document.getElementById('round-display').innerText = "ç¬¬ " + roundCount + " è½®";
            
            let remaining = queue.length - (currentIndex + 1);
            if(remaining < 0) remaining = 0;
            document.getElementById('left-display').innerText = "å‰©: " + remaining;

            // --- æ™ºèƒ½å­—ä½“å¤§å°é€»è¾‘ (é’ˆå¯¹å¤§å±å’Œæ‰‹æœº) ---
            const len = item.text.length;
            const isLandscape = window.innerWidth > window.innerHeight;
            let fontSize;

            if (isLandscape) {
                // æ¨ªå±æ¨¡å¼ (ç”µè„‘æˆ–æ¨ªå±æ‰‹æœº)
                if (len <= 2) fontSize = 18;      // I, No -> æå¤§
                else if (len <= 5) fontSize = 14; // Apple -> è¶…å¤§
                else if (len <= 10) fontSize = 10; // Classroom -> å¾ˆå¤§
                else if (len <= 20) fontSize = 7; // çŸ­å¥ -> å¤§
                else if (len <= 35) fontSize = 5; // ä¸­å¥ -> ä¸­
                else fontSize = 3.5;              // é•¿å¥ -> é€‚ä¸­
            } else {
                // ç«–å±æ¨¡å¼ (å°½ç®¡æœ‰æç¤ºï¼Œè¿˜æ˜¯åšä¸ªä¿åº•)
                if (len <= 3) fontSize = 9;
                else if (len <= 8) fontSize = 6;
                else if (len <= 20) fontSize = 3.5;
                else fontSize = 2.5;
            }

            textEl.style.fontSize = fontSize + "rem";
            
            // åŠ¨ç”»é‡ç½®
            textEl.classList.remove('pop-effect');
            void textEl.offsetWidth; 
            textEl.classList.add('pop-effect');
        }

        function shuffle(arr) {
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
        }
    </script>
</body>
</html>
