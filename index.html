<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å°å­¦è‹±è¯­é—ªå¡ (åŸç”Ÿå­—ä½“ç‰ˆ)</title>
    <style>
        :root {
            /* æç®€é…è‰²ï¼šå»é™¤èŠ±å“¨æ¸å˜ï¼Œä½¿ç”¨é«˜å¯¹æ¯”åº¦é¢œè‰² */
            --bg-color: #f2f2f7;       /* iOS è®¾ç½®é¡µèƒŒæ™¯ç° */
            --card-bg: #ffffff;        /* çº¯ç™½å¡ç‰‡ */
            --text-main: #000000;      /* çº¯é»‘ */
            --text-sub: #8e8e93;       /* è¾…åŠ©ç° */
            --accent-color: #007aff;   /* ç³»ç»Ÿè“ */
            --btn-bg: #007aff;         /* æŒ‰é’®è“ */
            --btn-text: #ffffff;
            --border-color: #c6c6c8;
        }

        body {
            margin: 0;
            padding: 0;
            /* æ ¸å¿ƒä¿®æ”¹ï¼šä½¿ç”¨ç³»ç»Ÿé»˜è®¤å­—ä½“ (system-ui) */
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            height: 100vh;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        /* ---------------- æ¨ªå±æç¤ºå±‚ ---------------- */
        #orientation-hint {
            display: none; /* é»˜è®¤éšè— */
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: 10000;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            padding: 20px;
            box-sizing: border-box;
        }

        .hint-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            animation: rotateDevice 2s infinite ease-in-out;
        }

        .ignore-btn {
            margin-top: 30px;
            padding: 12px 30px;
            background: transparent;
            border: 1px solid white;
            color: white;
            font-size: 1rem;
            border-radius: 8px;
            cursor: pointer;
        }

        @keyframes rotateDevice {
            0% { transform: rotate(0deg); }
            50% { transform: rotate(-90deg); }
            100% { transform: rotate(0deg); }
        }

        /* ä»…åœ¨ç«–å±ä¸”æ˜¯æ‰‹æœºå°ºå¯¸æ—¶æ˜¾ç¤ºæç¤º */
        @media screen and (orientation: portrait) and (max-width: 800px) {
            #orientation-hint { display: flex; }
        }

        /* ---------------- ä¸»å®¹å™¨ ---------------- */
        .container {
            background-color: var(--card-bg);
            width: 95%;
            height: 95%;
            border-radius: 12px; /* æ›´å°çš„åœ†è§’ï¼Œæ›´å•†åŠ¡ */
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            display: flex;
            flex-direction: column;
            padding: 15px;
            box-sizing: border-box;
            position: relative;
        }

        /* ---------------- 1. é¦–é¡µ (é€‰æ‹©ç•Œé¢) ---------------- */
        #selection-screen {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        h1 {
            text-align: center;
            font-size: 1.8rem;
            margin: 10px 0 20px 0;
            font-weight: 600;
        }

        .unit-list {
            flex: 1;
            overflow-y: auto;
            padding: 5px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 12px;
            align-content: start;
        }

        /* é€‰é¡¹å¡æ ·å¼ï¼šå»é™¤è¾¹æ¡†ï¼Œç±»ä¼¼ç³»ç»Ÿè®¾ç½®é¡¹ */
        .unit-item {
            background: #f9f9f9;
            border: 1px solid #e5e5ea;
            border-radius: 10px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            text-align: center;
            transition: background 0.2s;
        }

        .unit-item strong {
            display: block;
            font-size: 1.1rem;
            color: #000;
            margin-bottom: 5px;
        }

        .unit-item span {
            font-size: 0.9rem;
            color: var(--text-sub);
        }

        /* é€‰ä¸­çŠ¶æ€ï¼šç®€å•çš„è“è‰²è¾¹æ¡†æˆ–èƒŒæ™¯ */
        input[type="checkbox"] { display: none; }
        
        input[type="checkbox"]:checked + .unit-item {
            background-color: #eef7ff;
            border-color: var(--accent-color);
        }
        input[type="checkbox"]:checked + .unit-item strong {
            color: var(--accent-color);
        }

        .start-btn {
            width: 100%;
            margin-top: 15px;
            padding: 16px;
            background-color: var(--btn-bg);
            color: var(--btn-text);
            font-size: 1.2rem;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
        }
        .start-btn:active { opacity: 0.8; }

        /* ---------------- 2. ç»ƒä¹ ç•Œé¢ ---------------- */
        #game-screen {
            display: none;
            flex-direction: column;
            height: 100%;
        }

        /* é¡¶éƒ¨çŠ¶æ€æ ï¼šæç®€æ–‡å­— */
        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #f0f0f0;
            padding-bottom: 10px;
            margin-bottom: 10px;
            font-size: 0.95rem;
            color: var(--text-sub);
        }

        .status-highlight {
            color: var(--accent-color);
            font-weight: 600;
            background: #eef7ff;
            padding: 4px 10px;
            border-radius: 4px;
        }

        /* å•è¯æ˜¾ç¤ºåŒº */
        .card-area {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            cursor: pointer;
            /* é˜²æ­¢é•¿å•è¯æº¢å‡º */
            overflow: hidden; 
        }

        #word-display {
            font-weight: 600; /* é€‚åº¦åŠ ç²—ï¼Œä¸è¦å¤ªå¤¸å¼  */
            text-align: center;
            line-height: 1.2;
            word-wrap: break-word;
            width: 100%;
        }

        /* åº•éƒ¨æ“ä½œæ  */
        .control-bar {
            display: flex;
            gap: 15px;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #f0f0f0;
        }

        .btn {
            padding: 15px 0;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 500;
            border: none;
            cursor: pointer;
            font-family: inherit; /* ç»§æ‰¿ç³»ç»Ÿå­—ä½“ */
        }

        .btn-exit {
            background-color: #e5e5ea;
            color: #000;
            width: 30%;
        }

        .btn-next {
            background-color: var(--btn-bg);
            color: white;
            width: 70%;
        }

        .btn:active { opacity: 0.7; }

    </style>
</head>
<body>

    <!-- æ¨ªå±æç¤º (å¸¦å¿½ç•¥æŒ‰é’®) -->
    <div id="orientation-hint">
        <div class="hint-icon">ğŸ“± âŸ³</div>
        <h3>å»ºè®®æ¨ªå±ä½¿ç”¨</h3>
        <p style="color: #ccc; font-size: 0.9rem; margin-bottom: 20px;">æ¨ªå±æ¨¡å¼ä¸‹å­—ä½“æ›´å¤§ï¼Œä½“éªŒæ›´å¥½</p>
        <button class="ignore-btn" onclick="document.getElementById('orientation-hint').style.display='none'">
            å¿½ç•¥ï¼Œç»§ç»­ç«–å±ä½¿ç”¨
        </button>
    </div>

    <div class="container">
        
        <!-- é€‰æ‹©é¡µ -->
        <div id="selection-screen">
            <h1>é€‰æ‹©å•å…ƒ</h1>
            <div class="unit-list">
                <input type="checkbox" id="u1" value="1" checked>
                <label for="u1" class="unit-item">
                    <strong>Unit 1 ç¬¬ä¸€å•å…ƒ</strong>
                    <span>Greetings é—®å€™</span>
                </label>

                <input type="checkbox" id="u2" value="2" checked>
                <label for="u2" class="unit-item">
                    <strong>Unit 2 ç¬¬äºŒå•å…ƒ</strong>
                    <span>Numbers æ•°å­—</span>
                </label>

                <input type="checkbox" id="u3" value="3" checked>
                <label for="u3" class="unit-item">
                    <strong>Unit 3 ç¬¬ä¸‰å•å…ƒ</strong>
                    <span>Family å®¶åº­</span>
                </label>

                <input type="checkbox" id="u4" value="4" checked>
                <label for="u4" class="unit-item">
                    <strong>Unit 4 ç¬¬å››å•å…ƒ</strong>
                    <span>Classroom æ•™å®¤</span>
                </label>

                <input type="checkbox" id="u5" value="5" checked>
                <label for="u5" class="unit-item">
                    <strong>Unit 5 ç¬¬äº”å•å…ƒ</strong>
                    <span>Schoolbag ä¹¦åŒ…</span>
                </label>

                <input type="checkbox" id="u6" value="6" checked>
                <label for="u6" class="unit-item">
                    <strong>Unit 6 ç¬¬å…­å•å…ƒ</strong>
                    <span>Colours é¢œè‰²</span>
                </label>

                <input type="checkbox" id="u7" value="7" checked>
                <label for="u7" class="unit-item">
                    <strong>æ‹“å±•å†…å®¹</strong>
                    <span>Stories æ•…äº‹/é•¿å¥</span>
                </label>
            </div>
            <button class="start-btn" onclick="startGame()">å¼€å§‹ç»ƒä¹  (Start)</button>
        </div>

        <!-- ç»ƒä¹ é¡µ -->
        <div id="game-screen">
            <div class="status-bar">
                <span>ç¬¬ <b id="round-num">1</b> è½®</span>
                <span class="status-highlight" id="unit-name">Unit 1</span>
                <span>å‰©ä½™: <b id="left-num">10</b></span>
            </div>

            <div class="card-area" onclick="nextCard()">
                <div id="word-display">Ready</div>
            </div>

            <div class="control-bar">
                <button class="btn btn-exit" onclick="exitGame()">é€€å‡º</button>
                <button class="btn btn-next" onclick="nextCard()">ä¸‹ä¸€ä¸ª</button>
            </div>
        </div>

    </div>

    <script>
        const data = {
            1: [
                "hello", "nice", "meet", "you", "let's", "play", "I", "am", "I'm", "too", "Miss", "photo", "how", "say",
                "Nice to meet you.", "Let's play.", "I'm Miss Li.", "How do you say â€œhelloâ€."
            ],
            2: [
                "number", "one", "two", "three", "four", "five", "six", "seven", "balloon", "thank", "please", "Numbers",
                "Four balloons.", "Six balloons.", "Two balloons.", "One balloon.", "Thank you.", "Please say the number."
            ],
            3: [
                "family", "my", "mum", "dad", "grandpa", "grandma", "sister", "and", "brother", "this", "is", "love", "me", "tree",
                "Meet my family.", "My sister and brother.", "This is my grandma.", "I love my grandma.", "This is Toby's mum.", "I love my family.", "This is Toby's sister, May."
            ],
            4: [
                "classroom", "what", "open", "door", "blackboard", "window", "desk", "chair", "it", "big", "that", "teacher", "Good job!", "a(n)", "very", "old", "school", "look",
                "What's this?", "Open the door.", "This is my chair.", "This is the blackboard.", "That is my teacher.", "Good job, May!", "This is my classroom."
            ],
            5: [
                "schoolbag", "pencil case", "pencil", "book", "bye", "goodbye", "no", "here you are", "read", "together", "School things",
                "Open my schoolbag.", "Thatâ€™s Toby's book and pencil case.", "Let's read together.", "Here you are.", "Goodbye, dad!", "Look, this is my pencil case."
            ],
            6: [
                "colour", "red", "green", "blue", "black", "white", "yellow", "so", "many", "happy", "Chinese New Year", "stop", "go", "slow",
                "What colour?", "Black white and yellow.", "Red green and blue.", "So many colors.", "Blue green red and yellow, Four colors.", "Itâ€™s green red and yellow.", "Happy Chinese New Year", "It's red, stop!", "It's green, go!", "It's yellow, slow!"
            ],
            7: [
                "This is a very old school.", "That is an old school.", "Three books.", 
                "That is an apple tree.", "This apple is very big.", "This is my apple.", "One apple now.", 
                "The moon is in the water.", "Come and help.", "That is the moon.", "Itâ€™s still in the sky.", 
                "Six people in my family.", "Friendly Shandong welcomes you!", 
                "My brother is six, I love my brother.", "This is Mount Taishan."
            ]
        };

        let playList = [];
        let index = 0;
        let round = 1;

        // è‡ªåŠ¨éšè—æ¨ªå±æç¤º
        window.addEventListener("orientationchange", function() {
            if (Math.abs(window.orientation) === 90) {
                 document.getElementById('orientation-hint').style.display='none';
            }
        });

        function startGame() {
            const checks = document.querySelectorAll('input[type="checkbox"]:checked');
            if (checks.length === 0) { alert("è¯·é€‰æ‹©è‡³å°‘ä¸€ä¸ªå•å…ƒ"); return; }

            playList = [];
            checks.forEach(c => {
                const u = parseInt(c.value);
                data[u].forEach(t => playList.push({t: t, u: u}));
            });

            shuffle(playList);
            index = 0;
            round = 1;

            document.getElementById('selection-screen').style.display = 'none';
            document.getElementById('game-screen').style.display = 'flex';
            render();
        }

        function exitGame() {
            document.getElementById('game-screen').style.display = 'none';
            document.getElementById('selection-screen').style.display = 'flex';
        }

        function nextCard() {
            index++;
            if (index >= playList.length) {
                round++;
                index = 0;
                shuffle(playList);
            }
            render();
        }

        function render() {
            const item = playList[index];
            const textEl = document.getElementById('word-display');
            
            textEl.innerText = item.t;
            document.getElementById('unit-name').innerText = item.u === 7 ? "æ•…äº‹" : "Unit " + item.u;
            document.getElementById('round-num').innerText = round;
            
            let left = playList.length - (index + 1);
            if (left < 0) left = 0;
            document.getElementById('left-num').innerText = left;

            // å­—ä½“é€‚é…é€»è¾‘
            const len = item.t.length;
            const isLandscape = window.innerWidth > window.innerHeight;
            let size = 3; // é»˜è®¤ rem

            if (isLandscape) {
                // æ¨ªå±å­—ä½“ç­–ç•¥
                if (len <= 2) size = 16;
                else if (len <= 5) size = 12;
                else if (len <= 10) size = 8;
                else if (len <= 20) size = 5;
                else if (len <= 35) size = 4;
                else size = 3;
            } else {
                // ç«–å±å­—ä½“ç­–ç•¥ (å³ä½¿ç«–å±ä¹Ÿå°½é‡å¤§)
                if (len <= 3) size = 9;
                else if (len <= 8) size = 6;
                else if (len <= 20) size = 3.5;
                else size = 2.5;
            }

            textEl.style.fontSize = size + "rem";
        }

        function shuffle(arr) {
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
        }
    </script>
</body>
</html>
