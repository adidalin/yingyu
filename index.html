<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å°å­¦è‹±è¯­é—ªå¡ (ç¨³å®šå¤§å­—ç‰ˆ)</title>
    <style>
        :root {
            /* æç®€ç³»ç»Ÿé…è‰² */
            --bg-color: #f2f2f7;
            --card-bg: #ffffff;
            --text-color: #000000;
            --accent-color: #007aff; 
            --gray-text: #8e8e93;
        }

        body {
            margin: 0;
            padding: 0;
            /* åŸç”Ÿç³»ç»Ÿå­—ä½“ï¼Œå¹²å‡€æ¸…æ™° */
            font-family: system-ui, -apple-system, sans-serif;
            background-color: var(--bg-color);
            height: 100vh;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        /* ---------------- æ¨ªå±å»ºè®®æç¤º (å¯å¿½ç•¥) ---------------- */
        #orientation-hint {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 9999;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            text-align: center;
        }

        /* ä»…åœ¨ç«–å±æ‰‹æœºä¸‹æ˜¾ç¤º */
        @media screen and (orientation: portrait) and (max-width: 800px) {
            #orientation-hint { display: flex; }
        }

        .ignore-btn {
            margin-top: 20px;
            padding: 10px 25px;
            border: 1px solid white;
            background: transparent;
            color: white;
            border-radius: 20px;
            font-size: 1rem;
        }

        /* ---------------- ä¸»å®¹å™¨ ---------------- */
        .container {
            background-color: var(--card-bg);
            width: 96%;
            height: 96%;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
            padding: 15px;
            box-sizing: border-box;
        }

        /* ---------------- 1. é€‰å¡ç•Œé¢ ---------------- */
        #selection-screen {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        h1 {
            text-align: center;
            margin: 10px 0;
            font-size: 1.6rem;
            color: var(--text-color);
        }

        .unit-list {
            flex: 1;
            overflow-y: auto;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            padding: 5px;
            align-content: start;
        }

        .unit-item {
            background: #f5f5f7;
            border: 2px solid transparent;
            border-radius: 12px;
            padding: 20px 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .unit-item strong { display: block; font-size: 1.1rem; color: #333; }
        .unit-item span { font-size: 0.9rem; color: var(--gray-text); margin-top: 4px; display: block; }

        input[type="checkbox"] { display: none; }
        input[type="checkbox"]:checked + .unit-item {
            background-color: #eaf2ff;
            border-color: var(--accent-color);
        }
        input[type="checkbox"]:checked + .unit-item strong { color: var(--accent-color); }

        .start-btn {
            margin-top: 15px;
            padding: 18px;
            background-color: var(--accent-color);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.3rem;
            font-weight: bold;
            width: 100%;
            cursor: pointer;
        }

        /* ---------------- 2. ç»ƒä¹ ç•Œé¢ (æ ¸å¿ƒä¿®æ”¹) ---------------- */
        #game-screen {
            display: none;
            flex-direction: column;
            height: 100%;
        }

        .top-info {
            display: flex;
            justify-content: space-between;
            color: var(--gray-text);
            font-size: 1rem;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        .info-highlight { color: var(--accent-color); font-weight: bold; }

        /* å†…å®¹æ˜¾ç¤ºåŒºï¼šç»å¯¹å±…ä¸­ */
        .card-display {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            text-align: center;
            cursor: pointer;
            overflow: hidden; /* é˜²æ­¢æº¢å‡º */
            padding: 0 10px; /* å·¦å³ç•™ä¸€ç‚¹è¾¹è· */
            box-sizing: border-box;
        }

        #text-content {
            font-weight: bold;
            line-height: 1.1;
            color: black;
            width: 100%;
            /* å…³é”®ï¼šå…è®¸é•¿å•è¯æ¢è¡Œï¼Œé˜²æ­¢æ’‘ç ´å±å¹• */
            word-wrap: break-word; 
        }

        /* --- æ ¸å¿ƒå­—ä½“ç­–ç•¥ï¼šä¸¤å¥—å›ºå®šçš„å¤§å­—ä½“ --- */
        
        /* ç­–ç•¥ A: å•è¯æ¨¡å¼ (Word Mode) - æå¤§ */
        .type-word {
            /* æ¨ªå±æ—¶ï¼šä½¿ç”¨è§†å£å®½åº¦çš„ 16% æˆ– è§†å£é«˜åº¦çš„ 35%ï¼Œå–æœ€å°å€¼ä»¥é˜²æº¢å‡º */
            font-size: min(16vw, 35vh); 
        }
        
        /* ç­–ç•¥ B: å¥å­æ¨¡å¼ (Sentence Mode) - å¾ˆå¤§ï¼Œä½†é€‚åˆå¤šè¡Œ */
        .type-sentence {
            /* æ¨ªå±æ—¶ï¼šä½¿ç”¨è§†å£å®½åº¦çš„ 6% æˆ– è§†å£é«˜åº¦çš„ 12% */
            font-size: min(6vw, 12vh);
        }

        /* é’ˆå¯¹ç«–å±çš„å•ç‹¬è°ƒæ•´ (è™½ç„¶å»ºè®®æ¨ªå±ï¼Œä½†å¿…é¡»é€‚é…) */
        @media screen and (orientation: portrait) {
            .type-word {
                /* ç«–å±å•è¯ï¼šå®½åº¦ä¼˜å…ˆï¼Œç¨å¾®å‡å°ä¸€ç‚¹é˜²æ­¢é•¿è¯æŠ˜è¡Œå¤ªéš¾çœ‹ */
                font-size: 16vw; 
            }
            .type-sentence {
                /* ç«–å±å¥å­ */
                font-size: 7vw;
            }
        }

        /* åº•éƒ¨æŒ‰é’® */
        .bottom-bar {
            display: flex;
            gap: 15px;
            padding-top: 15px;
            border-top: 1px solid #eee;
            height: 70px;
        }

        .btn {
            border: none;
            border-radius: 12px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            height: 100%;
        }
        .btn-exit { width: 30%; background: #f0f0f5; color: #333; }
        .btn-next { width: 70%; background: var(--accent-color); color: white; }
        .btn:active { opacity: 0.8; }

    </style>
</head>
<body>

    <!-- æ¨ªå±æç¤º (å¯å¿½ç•¥) -->
    <div id="orientation-hint">
        <div style="font-size: 4rem; margin-bottom: 20px;">ğŸ“± âŸ³</div>
        <h3>å»ºè®®æ¨ªå±ä½¿ç”¨</h3>
        <p style="color: #ccc;">æ¨ªå±æ¨¡å¼ä¸‹å­—ä½“æ›´å¤§ã€æ˜¾ç¤ºæ›´å®Œæ•´</p>
        <button class="ignore-btn" onclick="document.getElementById('orientation-hint').style.display='none'">
            å¿½ç•¥ï¼Œç»§ç»­ç«–å±
        </button>
    </div>

    <div class="container">
        
        <!-- é€‰æ‹©é¡µ -->
        <div id="selection-screen">
            <h1>é€‰æ‹©å†…å®¹</h1>
            <div class="unit-list">
                <input type="checkbox" id="u1" value="1" checked>
                <label for="u1" class="unit-item"><strong>Unit 1 ç¬¬ä¸€å•å…ƒ</strong><span>Greetings</span></label>

                <input type="checkbox" id="u2" value="2" checked>
                <label for="u2" class="unit-item"><strong>Unit 2 ç¬¬äºŒå•å…ƒ</strong><span>Numbers</span></label>

                <input type="checkbox" id="u3" value="3" checked>
                <label for="u3" class="unit-item"><strong>Unit 3 ç¬¬ä¸‰å•å…ƒ</strong><span>Family</span></label>

                <input type="checkbox" id="u4" value="4" checked>
                <label for="u4" class="unit-item"><strong>Unit 4 ç¬¬å››å•å…ƒ</strong><span>Classroom</span></label>

                <input type="checkbox" id="u5" value="5" checked>
                <label for="u5" class="unit-item"><strong>Unit 5 ç¬¬äº”å•å…ƒ</strong><span>Schoolbag</span></label>

                <input type="checkbox" id="u6" value="6" checked>
                <label for="u6" class="unit-item"><strong>Unit 6 ç¬¬å…­å•å…ƒ</strong><span>Colours</span></label>

                <input type="checkbox" id="u7" value="7" checked>
                <label for="u7" class="unit-item"><strong>æ‹“å±•å†…å®¹</strong><span>Stories</span></label>
            </div>
            <button class="start-btn" onclick="startGame()">å¼€å§‹ç»ƒä¹ </button>
        </div>

        <!-- æ¸¸æˆé¡µ -->
        <div id="game-screen">
            <div class="top-info">
                <span>ç¬¬ <b id="round-txt" class="info-highlight">1</b> è½®</span>
                <span id="unit-txt">Unit 1</span>
                <span>å‰© <b id="left-txt" class="info-highlight">10</b></span>
            </div>

            <div class="card-display" onclick="nextCard()">
                <!-- è¿™ä¸ªå…ƒç´ ä¼šæ ¹æ®å†…å®¹åˆ‡æ¢ class -->
                <div id="text-content" class="type-word">Ready</div>
            </div>

            <div class="bottom-bar">
                <button class="btn btn-exit" onclick="exitGame()">é€€å‡º</button>
                <button class="btn btn-next" onclick="nextCard()">ä¸‹ä¸€ä¸ª</button>
            </div>
        </div>
    </div>

    <script>
        const data = {
            1: [
                "hello", "nice", "meet", "you", "let's", "play", "I", "am", "I'm", "too", "Miss", "photo", "how", "say",
                "Nice to meet you.", "Let's play.", "I'm Miss Li.", "How do you say â€œhelloâ€."
            ],
            2: [
                "number", "one", "two", "three", "four", "five", "six", "seven", "balloon", "thank", "please", "Numbers",
                "Four balloons.", "Six balloons.", "Two balloons.", "One balloon.", "Thank you.", "Please say the number."
            ],
            3: [
                "family", "my", "mum", "dad", "grandpa", "grandma", "sister", "and", "brother", "this", "is", "love", "me", "tree",
                "Meet my family.", "My sister and brother.", "This is my grandma.", "I love my grandma.", "This is Toby's mum.", "I love my family.", "This is Toby's sister, May."
            ],
            4: [
                "classroom", "what", "open", "door", "blackboard", "window", "desk", "chair", "it", "big", "that", "teacher", "Good job!", "a(n)", "very", "old", "school", "look",
                "What's this?", "Open the door.", "This is my chair.", "This is the blackboard.", "That is my teacher.", "Good job, May!", "This is my classroom."
            ],
            5: [
                "schoolbag", "pencil case", "pencil", "book", "bye", "goodbye", "no", "here you are", "read", "together", "School things",
                "Open my schoolbag.", "Thatâ€™s Toby's book and pencil case.", "Let's read together.", "Here you are.", "Goodbye, dad!", "Look, this is my pencil case."
            ],
            6: [
                "colour", "red", "green", "blue", "black", "white", "yellow", "so", "many", "happy", "Chinese New Year", "stop", "go", "slow",
                "What colour?", "Black white and yellow.", "Red green and blue.", "So many colors.", "Blue green red and yellow, Four colors.", "Itâ€™s green red and yellow.", "Happy Chinese New Year", "It's red, stop!", "It's green, go!", "It's yellow, slow!"
            ],
            7: [
                "This is a very old school.", "That is an old school.", "Three books.", 
                "That is an apple tree.", "This apple is very big.", "This is my apple.", "One apple now.", 
                "The moon is in the water.", "Come and help.", "That is the moon.", "Itâ€™s still in the sky.", 
                "Six people in my family.", "Friendly Shandong welcomes you!", 
                "My brother is six, I love my brother.", "This is Mount Taishan."
            ]
        };

        let playQueue = [];
        let index = 0;
        let round = 1;

        // è‡ªåŠ¨éšè—æ¨ªå±æç¤º
        window.addEventListener("orientationchange", function() {
            if (Math.abs(window.orientation) === 90) {
                 document.getElementById('orientation-hint').style.display='none';
            }
        });

        function startGame() {
            const checks = document.querySelectorAll('input[type="checkbox"]:checked');
            if (checks.length === 0) { alert("è¯·é€‰æ‹©å†…å®¹"); return; }

            playQueue = [];
            checks.forEach(c => {
                const u = parseInt(c.value);
                data[u].forEach(txt => playQueue.push({t: txt, u: u}));
            });

            shuffle(playQueue);
            index = 0;
            round = 1;
            
            document.getElementById('selection-screen').style.display = 'none';
            document.getElementById('game-screen').style.display = 'flex';
            render();
        }

        function exitGame() {
            document.getElementById('game-screen').style.display = 'none';
            document.getElementById('selection-screen').style.display = 'flex';
        }

        function nextCard() {
            index++;
            if (index >= playQueue.length) {
                round++;
                index = 0;
                shuffle(playQueue);
            }
            render();
        }

        function render() {
            const item = playQueue[index];
            const textEl = document.getElementById('text-content');
            
            textEl.innerText = item.t;
            document.getElementById('unit-txt').innerText = item.u === 7 ? "æ•…äº‹" : "Unit " + item.u;
            document.getElementById('round-txt').innerText = round;
            
            let left = playQueue.length - (index + 1);
            document.getElementById('left-txt').innerText = left < 0 ? 0 : left;

            // --- æ ¸å¿ƒé€»è¾‘ï¼šåŒºåˆ†å•è¯å’Œå¥å­ ---
            const len = item.t.length;
            
            // é˜ˆå€¼è®¾å®šä¸º 13 ä¸ªå­—ç¬¦
            // "Pencil case" (11) -> å•è¯æ¨¡å¼ (æå¤§)
            // "Nice to meet you" (16) -> å¥å­æ¨¡å¼ (ç¨³é‡çš„å¤§å·)
            if (len <= 13) {
                textEl.className = 'type-word';
            } else {
                textEl.className = 'type-sentence';
            }
        }

        function shuffle(arr) {
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
        }
    </script>
</body>
</html>
